<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpamGuard AI - Intelligent Verifier</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { 
            /* Professional Technology Background with Overlay */
            background: linear-gradient(rgba(0, 0, 0, 0.65), rgba(0, 0, 0, 0.65)), 
                        url('https://images.unsplash.com/photo-1550751827-4bd374c3f58b?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            min-height: 100vh; 
            color: white; 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .card { 
            background: rgba(0, 0, 0, 0.45); 
            backdrop-filter: blur(12px); 
            border: 1px solid rgba(255,255,255,0.15); 
            border-radius: 25px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.8);
        }
        h1 { 
            text-shadow: 2px 2px 12px rgba(0,0,0,0.9);
            font-weight: 800;
            color: #ffffff !important;
            letter-spacing: 1px;
        }
        .description {
            color: #f0f0f0; 
            font-size: 1.15rem;
            text-shadow: 1px 1px 6px rgba(0,0,0,0.6);
            opacity: 0.9;
        }
        .btn-primary { 
            background: linear-gradient(45deg, #ff416c, #ff4b2b); 
            border: none; 
            font-weight: bold; 
            letter-spacing: 1px;
            transition: 0.3s;
        }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(255, 75, 43, 0.5); }
        .btn-outline-light { border-radius: 12px; font-weight: 600; }
        .form-control { background: rgba(255,255,255,0.95); border-radius: 12px; border: none; padding: 15px; }
        .form-control:focus { background: #ffffff; box-shadow: 0 0 15px rgba(255,255,255,0.2); }
        #result { min-height: 50px; }
    </style>
</head>
<body class="d-flex align-items-center">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-7 text-center">
                <div class="card p-5">
                    <h1 class="mb-3">üö´ SpamGuard AI</h1>
                    <p class="mb-4 description">AI-Powered Protection. Verify Any Message Instantly.</p>
                    
                    <textarea id="smsInput" class="form-control mb-3 text-dark" rows="4" placeholder="Paste your message here..."></textarea>
                    
                    <div class="d-flex gap-2">
                        <button onclick="analyze()" class="btn btn-primary w-75 py-3">ANALYZE SECURITY</button>
                        <button onclick="document.getElementById('smsInput').value=''; document.getElementById('result').innerHTML='';" class="btn btn-outline-light w-25">Clear</button>
                    </div>
                    
                    <div id="result" class="mt-4 fs-4 fw-bold"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        async function analyze() {
            const text = document.getElementById('smsInput').value;
            const resDiv = document.getElementById('result');
            if(!text.trim()) return alert("Please enter a message!");
            
            resDiv.innerHTML = '<div class="spinner-border text-light" role="status"></div>';
            
            try {
                const response = await fetch('/predict', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({text: text})
                });
                const data = await response.json();
                
                const rawScore = parseFloat(data.confidence); 
                
                if(data.label === "SPAM") {
                    if(rawScore > 85) {
                        resDiv.innerHTML = `<span class="text-danger">üö® DANGER: MESSAGE IS COMPLETELY SPAM</span>`;
                    } else {
                        resDiv.innerHTML = `<span class="text-warning">‚ö†Ô∏è WARNING: MESSAGE IS LIKELY SPAM</span>`;
                    }
                } else {
                    if(rawScore > 85) {
                        resDiv.innerHTML = `<span class="text-success">‚úÖ SAFE: MESSAGE IS COMPLETELY SECURE</span>`;
                    } else {
                        resDiv.innerHTML = `<span class="text-info">üëç NOTICE: MESSAGE IS LIKELY SAFE</span>`;
                    }
                }
            } catch (error) {
                resDiv.innerHTML = `<span class="text-white small">Error connecting to server. Ensure FastAPI is running.</span>`;
            }
        }
    </script>
</body>
</html>